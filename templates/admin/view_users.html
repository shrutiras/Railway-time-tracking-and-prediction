<!DOCTYPE html>
<html>
<head><title>View Users</title></head>
<body>
  <h2>Registered Users</h2>
  <ul>
  {% for user in users %}
    <li>{{ user.username }} - {{ user.email }}</li>
  {% endfor %}
</ul>

  <div id="users"></div>

  <script>
    async function fetchUsers() {
      const res = await fetch('/users', {
        headers: { 'Authorization': 'Bearer ' + localStorage.getItem('token') }
      });
      const users = await res.json();
      const div = document.getElementById('users');
      div.innerHTML = users.map(u => `<p>${u.name} (${u.email})</p>`).join('');
    }

    fetchUsers();
  </script>
</body>
</html>
